<!DOCTYPE html>
<html lang="en">
<head>
    
    <title>Midterm</title>
    <style>
      #validation  {
            color: red;
        }
        span{
            color: red;
            
        }

        table{
            
            border-collapse:collapse ;
        }
        td{
            border: 1px solid;
        }
        tr:nth-child(3){
            background-color: blue;
            color:white
        }
        tr:nth-child(3) a{
            color:white
        }
        thead{
            background-color:green;
            color: white;
            font-size: 20px;

        }
        thead td{
            padding: 10px;
        }
    
       
    </style>
</head>
<body>
    <div><input type="text"  placeholder="Enter Site name" id="name">
    <input type="text" placeholder="Enter Address" id="address">
    <input type="text" placeholder="Enter keyword" id="keyword">
    <button id="addbtn">Add</button></div>
    <div id="validation"></div>
    <div id="optionDiv">
        <label>Add to:</label>
        <input type="checkbox" name="check1" value="table"/>Table
        <input type="checkbox" name="check2" value="list" />List
    </div>

    <h2>List</h2>
    <div id="listDiv"></div>

    <br><br>
    <div id="tableDiv">
        <table id="dataTable">
            <h2>Table</h2>
            <thead>
                <tr>
                    <td id="nameid">Site Name</td>
                    <td>keywords</td>
                </tr>
                
            </thead>
            <tbody id="Tbody">
                
            </tbody>
        </table>
    </div>
<button id="remove">Remove</button>
<script>

    let nameField = document.getElementById("name");
    let addressField = document.getElementById("address");
    let keywordField = document.getElementById("keyword");
    let addBtn = document.getElementById("addbtn");
    let tbody = document.getElementById("Tbody");
    let namesort = document.getElementById("nameid");
    let optionDiv = document.getElementById("optionDiv");
    let listDiv = document.getElementById("listDiv");
    let tableDiv = document.getElementById("tableDiv");
    let warningDiv = document.getElementById("validation");
    let remove = document.getElementById("remove");

    const ascending = (a, b) => (a.siteName > b.siteName) ? 1 : -1;
    const descending = (a, b) => (a.siteName > b.siteName) ? -1 : 1;
    
    
let tableArr =[];
let listArr =[];

window.onload = function(){
   updateTable(tableArr);
   updateList(listArr);
}
function updateTable(arr){
 
for (const elem of arr) {
    let tr = document.createElement("tr");
    if(elem.siteName === "amazon"){
        tr.innerHTML = `<td><a style="color:green;text-decoration:none;" href="${elem.siteAddress}" >${elem.siteName}</a></td><td style='color:blue;'>${elem.keyword}</td>`;
        
    }else{
        tr.innerHTML = `<td><a href="${elem.siteAddress}">${elem.siteName}</a></td><td>${elem.keyword}</td>`;
    }
   
   tbody.append(tr);
}

}
function updateList(arr){
for (const elem of arr) {
    let link = document.createElement("a");
    link.href = elem.address;
    link.innerHTML = elem.name
    listDiv.append(link);

    let ul = document.createElement("ul");
   
    for(let element of elem.keywords){
        ul.innerHTML += `<li>${element}</li>`;
    }
   
   listDiv.append(ul);
        
}

}

 let warningMessage = document.createElement("p");
let asterix = document.createElement("span");

    function validationFunc(){
        
        asterix.innerText = "*";
        if(nameField.value ===""){  
            nameField.style.borderColor = "red";
            warningMessage.innerHTML = "Please Enter the site name";
            nameField.before(asterix);
            warningDiv.innerHTML = warningMessage.innerHTML;
            return;

        }else if(addressField.value ===""){
            keywordField.style.borderColor = "";
            nameField.style.borderColor ="black";
            addressField.style.borderColor="red";
            warningMessage.innerHTML = "Please Enter the address";
            addressField.before(asterix);
            warningDiv.innerHTML = warningMessage.innerHTML;
            return;

        }else if(keywordField.value ===""){
            addressField.style.borderColor = "";
            nameField.style.borderColor = "";
            keywordField.style.borderColor="red";
            warningMessage.innerHTML = "Please Enter a Keyword";
            keywordField.before(asterix);
            warningDiv.innerHTML = warningMessage.innerHTML;
            return;
        }else{
            warningDiv.style.display="none";
            asterix.style.display ="none";
            keywordField.style.borderColor = "";
            
           addFunc();
            
        }
       
    }


    addBtn.onclick = validationFunc;
    
    function addFunc(){
    
        
asterix.innerText = "";
// nameField.value = "";
// addressField.value = "";
// keywordField.value = "";    
 
    }

    let keys;
    let OptionsTable = document.getElementsByName("check1")[0];
    OptionsTable.onchange = checkedTableFunc;
    function checkedTableFunc(){
        tableArr.push({siteName:nameField.value, siteAddress:addressField.value, keyword:keywordField.value});
        tbody.innerHTML = "";
       updateTable(tableArr);
       
    }

let OptionsList = document.getElementsByName("check2")[0];
    OptionsList.onclick = checkedListFunc;
    function checkedListFunc(){
        keys = keywordField.value;
        keyArr =keys.split(",");
        listArr.push({name:nameField.value, address:addressField.value, keywords:keyArr});
        listDiv.innerHTML = "";
        updateList(listArr);
    }
  
    namesort.onclick = sortByName;
    let newarr;
    let type;
    function sortByName(){
    if(type ==="ascending"){
        newarr = tableArr.sort(descending);
        type = "descending";
        tbody.innerHTML = "";
        updateTable(newarr);  
    }else{
        newarr = tableArr.sort(ascending);
        type="ascending";
        tbody.innerHTML = "";
        updateTable(newarr);  
    } 
         
    }

   


remove.onclick = removeItem;

function removeItem(){
    
    promptItem = prompt("Enter a site name", "");
    tableArr.forEach(function(element){
        if(element.siteName === promptItem){
            tableArr.splice(tableArr.indexOf(element));
        }

    });
    tbody.innerHTML = "";
    updateTable(tableArr); 
    
}

</script>
</body>
</html>
